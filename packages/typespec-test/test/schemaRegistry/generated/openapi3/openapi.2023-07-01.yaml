openapi: 3.0.0
info:
  title: Azure Schema Registry
  version: 2023-07-01
  description: SchemaRegistryClient is a client for registering and retrieving schemas from the Azure Schema Registry service.
tags: []
paths:
  /$schemaGroups:
    get:
      operationId: listSchemaGroups
      summary: Get list of schema groups.
      description: Gets the list of schema groups user is authorized to access.
      parameters:
        - $ref: '#/components/parameters/Azure.Core.Foundations.ApiVersionParameter'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StringsList'
        default:
          description: An unexpected error response.
          headers:
            x-ms-error-code:
              required: false
              description: String error code indicating what went wrong.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Azure.Core.Foundations.ErrorResponse'
  /$schemaGroups/$schemas/{id}:
    get:
      operationId: getSchemaById
      summary: Get a registered schema by its unique ID reference.
      description: Gets a registered schema by its unique ID.  Azure Schema Registry guarantees that ID is unique within a namespace. Operation response type is based on serialization of schema requested.
      parameters:
        - $ref: '#/components/parameters/Azure.Core.Foundations.ApiVersionParameter'
        - name: id
          in: path
          required: true
          description: Schema ID that uniquely identifies a schema in the registry namespace.
          schema:
            type: string
      responses:
        '200':
          description: The schema, including its metadata and content.
          headers:
            Location:
              required: true
              description: URL location of schema, identified by schema group, schema name, and version.
              schema:
                type: string
            Schema-Id:
              required: true
              description: References specific schema in registry namespace.
              schema:
                type: string
            Schema-Id-Location:
              required: true
              description: URL location of schema, identified by schema ID.
              schema:
                type: string
            Schema-Group-Name:
              required: true
              description: References schema group.
              schema:
                type: string
            Schema-Name:
              required: true
              description: References schema name.
              schema:
                type: string
            Schema-Version:
              required: true
              description: Version of the returned schema.
              schema:
                type: integer
                format: int32
            Content-Type:
              required: true
              description: The content type for given schema.
              schema:
                $ref: '#/components/schemas/SchemaContentTypeValues'
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
            text/plain; charset=utf-8:
              schema:
                type: string
                format: binary
            application/json; serialization=Avro:
              schema:
                type: string
                format: binary
            application/json; serialization=Json:
              schema:
                type: string
                format: binary
            text/vnd.ms.protobuf:
              schema:
                type: string
                format: binary
        default:
          description: An unexpected error response.
          headers:
            x-ms-error-code:
              required: false
              description: String error code indicating what went wrong.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Azure.Core.Foundations.ErrorResponse'
  /$schemaGroups/{groupName}/schemas/{name}:
    put:
      operationId: registerSchema
      summary: Register new schema
      description: Register new schema. If schema of specified name does not exist in specified group, schema is created at version 1. If schema of specified name exists already in specified group, schema is created at latest version + 1.
      parameters:
        - $ref: '#/components/parameters/Azure.Core.Foundations.ApiVersionParameter'
        - name: groupName
          in: path
          required: true
          description: Name of schema group.
          schema:
            type: string
        - name: name
          in: path
          required: true
          description: Name of schema.
          schema:
            type: string
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
          headers:
            Location:
              required: true
              description: URL location of schema, identified by schema group, schema name, and version.
              schema:
                type: string
            Schema-Id:
              required: true
              description: References specific schema in registry namespace.
              schema:
                type: string
            Schema-Id-Location:
              required: true
              description: URL location of schema, identified by schema ID.
              schema:
                type: string
            Schema-Group-Name:
              required: true
              description: References schema group.
              schema:
                type: string
            Schema-Name:
              required: true
              description: References schema name.
              schema:
                type: string
            Schema-Version:
              required: true
              description: Version of the returned schema.
              schema:
                type: integer
                format: int32
        default:
          description: An unexpected error response.
          headers:
            x-ms-error-code:
              required: false
              description: String error code indicating what went wrong.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Azure.Core.Foundations.ErrorResponse'
      requestBody:
        description: String representation (UTF-8) of the schema.
        required: true
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
          text/plain; charset=utf-8:
            schema:
              type: string
              format: binary
          application/json; serialization=Avro:
            schema:
              type: string
              format: binary
          application/json; serialization=Json:
            schema:
              type: string
              format: binary
          text/vnd.ms.protobuf:
            schema:
              type: string
              format: binary
  /$schemaGroups/{groupName}/schemas/{name}/versions:
    get:
      operationId: listSchemaVersions
      summary: List schema versions.
      description: Gets the list of all versions of one schema.
      parameters:
        - $ref: '#/components/parameters/Azure.Core.Foundations.ApiVersionParameter'
        - name: groupName
          in: path
          required: true
          description: Name of schema group.
          schema:
            type: string
        - name: name
          in: path
          required: true
          description: Name of schema.
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Int32sList'
        default:
          description: An unexpected error response.
          headers:
            x-ms-error-code:
              required: false
              description: String error code indicating what went wrong.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Azure.Core.Foundations.ErrorResponse'
  /$schemaGroups/{groupName}/schemas/{name}/versions/{version}:
    get:
      operationId: getSchemaByVersion
      summary: Get specific schema versions.
      description: Gets one specific version of one schema.
      parameters:
        - $ref: '#/components/parameters/Azure.Core.Foundations.ApiVersionParameter'
        - name: groupName
          in: path
          required: true
          description: Name of schema group.
          schema:
            type: string
        - name: name
          in: path
          required: true
          description: Name of schema.
          schema:
            type: string
        - name: version
          in: path
          required: true
          description: Version number of specific schema.
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: The schema, including its metadata and content.
          headers:
            Location:
              required: true
              description: URL location of schema, identified by schema group, schema name, and version.
              schema:
                type: string
            Schema-Id:
              required: true
              description: References specific schema in registry namespace.
              schema:
                type: string
            Schema-Id-Location:
              required: true
              description: URL location of schema, identified by schema ID.
              schema:
                type: string
            Schema-Group-Name:
              required: true
              description: References schema group.
              schema:
                type: string
            Schema-Name:
              required: true
              description: References schema name.
              schema:
                type: string
            Schema-Version:
              required: true
              description: Version of the returned schema.
              schema:
                type: integer
                format: int32
            Content-Type:
              required: true
              description: The content type for given schema.
              schema:
                $ref: '#/components/schemas/SchemaContentTypeValues'
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
            text/plain; charset=utf-8:
              schema:
                type: string
                format: binary
            application/json; serialization=Avro:
              schema:
                type: string
                format: binary
            application/json; serialization=Json:
              schema:
                type: string
                format: binary
            text/vnd.ms.protobuf:
              schema:
                type: string
                format: binary
        default:
          description: An unexpected error response.
          headers:
            x-ms-error-code:
              required: false
              description: String error code indicating what went wrong.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Azure.Core.Foundations.ErrorResponse'
  /$schemaGroups/{groupName}/schemas/{name}:get-id:
    post:
      operationId: getSchemaPropertiesByContent
      summary: Get properties for existing schema.
      description: Gets the properties referencing an existing schema within the specified schema group, as matched by schema content comparison.
      parameters:
        - $ref: '#/components/parameters/Azure.Core.Foundations.ApiVersionParameter'
        - name: groupName
          in: path
          required: true
          description: Name of schema group.
          schema:
            type: string
        - name: name
          in: path
          required: true
          description: Name of schema.
          schema:
            type: string
            pattern: ^[A-Za-z0-9][^\\/$:]*$
            maxLength: 50
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
          headers:
            Location:
              required: true
              description: URL location of schema, identified by schema group, schema name, and version.
              schema:
                type: string
            Schema-Id:
              required: true
              description: References specific schema in registry namespace.
              schema:
                type: string
            Schema-Id-Location:
              required: true
              description: URL location of schema, identified by schema ID.
              schema:
                type: string
            Schema-Group-Name:
              required: true
              description: References schema group.
              schema:
                type: string
            Schema-Name:
              required: true
              description: References schema name.
              schema:
                type: string
            Schema-Version:
              required: true
              description: Version of the returned schema.
              schema:
                type: integer
                format: int32
        default:
          description: An unexpected error response.
          headers:
            x-ms-error-code:
              required: false
              description: String error code indicating what went wrong.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Azure.Core.Foundations.ErrorResponse'
      requestBody:
        description: String representation (UTF-8) of the registered schema.
        required: true
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
          text/plain; charset=utf-8:
            schema:
              type: string
              format: binary
          application/json; serialization=Avro:
            schema:
              type: string
              format: binary
          application/json; serialization=Json:
            schema:
              type: string
              format: binary
          text/vnd.ms.protobuf:
            schema:
              type: string
              format: binary
security:
  - OAuth2Auth:
      - https://eventhubs.azure.net/.default
components:
  parameters:
    Azure.Core.Foundations.ApiVersionParameter:
      name: api-version
      in: query
      required: true
      description: The API version to use for this operation.
      schema:
        type: string
        minLength: 1
  schemas:
    Azure.Core.Foundations.Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: One of a server-defined set of error codes.
        message:
          type: string
          description: A human-readable representation of the error.
        target:
          type: string
          description: The target of the error.
        details:
          type: array
          items:
            $ref: '#/components/schemas/Azure.Core.Foundations.Error'
          description: An array of details about specific errors that led to this reported error.
        innererror:
          allOf:
            - $ref: '#/components/schemas/Azure.Core.Foundations.InnerError'
          description: An object containing more specific information than the current object about the error.
      description: The error object.
    Azure.Core.Foundations.ErrorResponse:
      type: object
      required:
        - error
      properties:
        error:
          allOf:
            - $ref: '#/components/schemas/Azure.Core.Foundations.Error'
          description: The error object.
      description: A response containing error details.
    Azure.Core.Foundations.InnerError:
      type: object
      properties:
        code:
          type: string
          description: One of a server-defined set of error codes.
        innererror:
          allOf:
            - $ref: '#/components/schemas/Azure.Core.Foundations.InnerError'
          description: Inner error.
      description: An object containing more specific information about the error. As per Microsoft One API guidelines - https://github.com/Microsoft/api-guidelines/blob/vNext/Guidelines.md#7102-error-condition-responses.
    Int32sList:
      type: object
      required:
        - value
      properties:
        value:
          type: array
          items:
            type: integer
            format: int32
          description: The collection of pageable items.
        nextLink:
          type: string
          description: The link to the next page of items
      description: The list of int32s with server paging support.
    SchemaContentTypeValues:
      type: string
      enum:
        - application/octet-stream
        - text/plain; charset=utf-8
        - application/json; serialization=Avro
        - application/json; serialization=Json
        - text/vnd.ms.protobuf
    SchemaGroup:
      type: object
      required:
        - groupName
      properties:
        groupName:
          type: string
          description: Name of schema group.
          readOnly: true
      description: Schema Group resource.
    SchemaName:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          maxLength: 50
          pattern: ^[A-Za-z0-9][^\\/$:]*$
          description: Name of schema.
          readOnly: true
      description: Schemas resource.
    SchemaProperties:
      type: object
      description: Metadata of a schema.
    ServiceApiVersions:
      type: string
      enum:
        - 2021-10
        - 2022-10
        - 2023-07-01
      description: Represents the Schema Registry API version to use for requests.
    StringsList:
      type: object
      required:
        - value
      properties:
        value:
          type: array
          items:
            type: string
          description: The collection of pageable items.
        nextLink:
          type: string
          description: The link to the next page of items
      description: The list of strings with server paging support.
  securitySchemes:
    OAuth2Auth:
      type: oauth2
      flows:
        implicit:
          authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
          scopes:
            https://eventhubs.azure.net/.default: ''
servers:
  - url: '{fullyQualifiedNamespace}'
    description: The Schema Registry service endpoint.
    variables:
      fullyQualifiedNamespace:
        default: ''
        description: The Schema Registry service endpoint, for example 'https://my-namespace.servicebus.windows.net'.
